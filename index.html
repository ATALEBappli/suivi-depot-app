<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Suivi Depot</title>

  <!-- Anti-cache l√©ger pour Safari -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>üìä Suivi Depot</h1>
  </header>

  <main>
    <!-- Onglets -->
    <div class="tabs">
      <button class="tablink active" onclick="openTab('synthese', this)" data-tab="synthese">üìä Synth√®se</button>
      <button class="tablink"        onclick="openTab('saisie', this)"    data-tab="saisie">‚úçÔ∏è Saisie</button>
    </div>

    <!-- Onglet Synth√®se -->
    <section id="synthese" class="tabcontent">
      <div id="kpis" style="margin:20px 0; font-size:18px; font-weight:bold;">Chargement‚Ä¶</div>

      <label>Mois
        <select id="mois"></select>
      </label>

      <label>Type
        <select id="type">
          <option value="">(Tous)</option>
          <option>Entr√©e</option>
          <option>Sortie</option>
        </select>
      </label>

      <label>Sous-bloc
        <select id="sous_bloc"></select>
      </label>

      <table id="table">
        <thead>
          <tr>
            <th>Date</th><th>Type</th><th>Sous-bloc</th><th>Montant</th><th>Description</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

<!-- Onglet Saisie -->
<section id="saisie" class="tabcontent" style="display:none">
  <h2>‚úçÔ∏è Nouvelle op√©ration</h2>

  <form id="saisieForm">
    <label>Type
      <select id="form_type">
        <option>Entr√©e</option>
        <option>Sortie</option>
      </select>
    </label><br>

    <label>Sous-bloc
      <select id="form_sous_bloc">
        <option value="Locaux">Locaux</option>
        <option value="APP">APP</option>
        <option value="Consigne">Consigne</option>
        <option value="Entr√©es divers">Entr√©es divers</option>
        <option value="Salaire">Salaire</option>
        <option value="Maintenance">Maintenance</option>
        <option value="Imp√¥ts et assurance">Imp√¥ts et assurance</option>
        <option value="√âlectricit√©">√âlectricit√©</option>
        <option value="Eau">Eau</option>
        <option value="T√©l√©phone">T√©l√©phone</option>
        <option value="Donation, Famille et divers">Donation, Famille et divers</option>
        <option value="Hadem">Hadem</option>
      </select>
    </label><br>

    <label>Date
      <input id="form_date" type="date" />
    </label><br>

    <label>Montant
      <input id="form_montant" type="number" step="0.01" />
    </label><br>

    <label>Description
      <input id="form_description" type="text" placeholder="ex: Facture T1, Paie Ao√ªt‚Ä¶" />
    </label><br>

    <button type="submit">üíæ Enregistrer</button>
  </form>
</section>

    
  </main>

  <script>
    // <<< REMPLACE ICI PAR TON URL APPS SCRIPT >>>
    window.API_URL = "https://script.google.com/macros/s/AKfycbzEdQuZwptiNpuCZoWaWNJrUaF9RplxylaErSI1tloi9wa_8Jz1djMmzDv4jHJzA_gCkA/exec";

    // Gestion simple des onglets
    function openTab(id, btn){
      // cacher tout
      document.querySelectorAll('.tabcontent').forEach(s => s.style.display = 'none');
      // afficher le bon
      const el = document.getElementById(id);
      if (el) el.style.display = 'block';
      // √©tat visuel
      document.querySelectorAll('.tablink').forEach(b => b.classList.remove('active'));
      if (btn) btn.classList.add('active');
    }

    // Ouvrir Synth√®se au chargement
    document.addEventListener('DOMContentLoaded', () => openTab('synthese', document.querySelector('.tablink')));
  </script>

  <script src="app.js?v=4"></script>

  <!-- Service Worker pour PWA -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
</body>
</html>


