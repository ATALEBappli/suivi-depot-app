<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Suivi Depot</title>

  <!-- Anti-cache lÃ©ger pour Safari -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>ğŸ“Š Suivi Depot</h1>
  </header>

  <main>
    <!-- Onglets -->
    <div class="tabs">
      <button class="tablink active" onclick="openTab('synthese', this)" data-tab="synthese">ğŸ“Š SynthÃ¨se</button>
      <button class="tablink"        onclick="openTab('saisie', this)"    data-tab="saisie">âœï¸ Saisie</button>
      <button class="tablink" onclick="openTab('param', this)" data-tab="param">âš™ï¸ ParamÃ©trage</button>
    </div>

    <!-- Onglet SynthÃ¨se -->
    <section id="synthese" class="tabcontent">
      <div id="kpis" style="margin:20px 0; font-size:18px; font-weight:bold;">Chargementâ€¦</div>

      <label>Mois
        <select id="mois"></select>
      </label>

      <label>Type
        <select id="type">
          <option value="">(Tous)</option>
          <option>EntrÃ©e</option>
          <option>Sortie</option>
        </select>
      </label>

      <table id="table">
        <thead>
          <tr>
            <th>Date</th><th>Type</th><th>Sous-bloc</th><th>Montant</th><th>Description</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>

<!-- Onglet Saisie -->
<section id="saisie" class="tabcontent" style="display:none">
  <h2>âœï¸ Nouvelle opÃ©ration</h2>

  <form id="saisieForm">
    <label>Type
      <select id="form_type">
        <option>EntrÃ©e</option>
        <option>Sortie</option>
      </select>
    </label><br>

          <label>Sous-bloc
  <select id="form_sous_bloc"></select>
</label>
<div id="other_wrap" style="display:none; margin:6px 0 10px 0;">
  <input id="form_sous_bloc_other" type="text" placeholder="Saisir un autre sous-blocâ€¦" />
</div>
    
   
<div id="app-extra" style="display:none; padding:10px; margin:10px 0; border:1px dashed #ccc; border-radius:8px;">
  <strong>Appartement</strong>
  <div style="display:grid; gap:8px; grid-template-columns: 1fr 1fr;">
    <label>NumÃ©ro
      <select id="form_app_num"></select>
    </label>
    <label>Type (F2/F3/F4â€¦)
      <input id="app-type" type="text" placeholder="ex: F3" />
    </label>
    <label>Locataire
      <input id="form_locataire" type="text" placeholder="Nom du locataire" />
    </label>
  </div>
  <p class="muted" style="margin:6px 0 0">ğŸ‘‰ Le montant et la date sont aussi prÃ©-remplis automatiquement (mais modifiables).</p>
</div>


    <div id="loc-extra" style="display:none; padding:10px; margin:10px 0; border:1px dashed #ccc; border-radius:8px;">
  <strong>Locaux</strong>
  <div style="display:grid; gap:8px; grid-template-columns: 1fr 1fr;">
    <label>Code
      <select id="form_loc_code"></select>
    </label>
    <label>Nom
      <input id="loc-nom" type="text" placeholder="ex: Local RDC" />
    </label>
    <label>Locataire
      <input id="form_locataire_loc" type="text" placeholder="Nom du locataire" />
    </label>
  </div>
  <p class="muted" style="margin:6px 0 0">ğŸ‘‰ Le montant et la date sont aussi prÃ©-remplis automatiquement (mais modifiables).</p>
</div>
    
<div id="hedam-extra" class="extra-panel" style="display:none; margin-top:1rem;">
  <label for="form_hedam_code">Sous-bloc HÃ©dam</label>
  <select id="form_hedam_code" name="hedam_code" style="max-width:450px;"></select>
</div>


  <input
    id="hedam-nom"
    type="text"
    readonly
    placeholder="Nom du sous-bloc (Plombie, MaÃ§onâ€¦)"
    style="margin-top:4px;"
  >
</div>


<!-- puis ton <label>Date> existant -->


    <label>Date
      <input id="form_date" type="date" />
    </label><br>

    <label>Montant
      <input id="form_montant" type="number" step="0.01" />
    </label><br>

    <label>Description
  <input id="form_description" type="text" placeholder="ex: Facture T1, Paie AoÃ»tâ€¦" />
</label>
<small id="desc-hint" class="muted"></small> <!-- â† AJOUT -->
<br>


    <button type="submit">ğŸ’¾ Enregistrer</button>
  </form>
</section>
<section id="param" class="tabcontent" style="display:none">
  <h2>âš™ï¸ ParamÃ©trage</h2>

  <!-- Bloc 1 : Appartements -->
  <article class="card">
    <h3>ğŸ¢ Appartements</h3>
    <p class="muted">GÃ¨re ici la liste des appartements (Num, Type, Locataire, Loyer). Ces donnÃ©es servent au prÃ©-remplissage dans <em>Saisie</em> quand tu choisis EntrÃ©e â†’ APP.</p>

    <div style="margin:8px 0">
      <button id="cfg-log-add">â• Ajouter un appartement</button>
      <button id="cfg-log-save">ğŸ’¾ Sauvegarder</button>
      <span id="cfg-log-msg" class="muted"></span>
    </div>

    <div class="table-wrap">
      <table id="cfg-log-table">
        <thead>
          <tr>
            <th>Num</th><th>Type (F2/F3/F4â€¦)</th><th>Locataire</th><th>Loyer (â‚¬)</th><th></th>
          </tr>
        </thead>
        <tbody><!-- rempli par JS --></tbody>
      </table>
    </div>
  </article>

  <!-- Bloc 1 : Locaux -->
  <article class="card">
  <h3>ğŸ¬ Locaux</h3>
  <p class="muted">GÃ¨re ici la liste des locaux (Code, Nom, Locataire, Loyer). Ces donnÃ©es servent au prÃ©-remplissage dans <em>Saisie</em> quand tu choisis EntrÃ©e â†’ Locaux.</p>

  <div style="margin:8px 0">
    <button id="cfg-loc-add">â• Ajouter un local</button>
    <button id="cfg-loc-save">ğŸ’¾ Sauvegarder</button>
    <span id="cfg-loc-msg" class="muted"></span>
  </div>

  <div class="table-wrap">
    <table id="cfg-loc-table">
      <thead>
        <tr>
          <th>Code</th><th>Nom</th><th>Locataire</th><th>Loyer (â‚¬)</th><th></th>
        </tr>
      </thead>
      <tbody><!-- rempli par JS --></tbody>
    </table>
  </div>
</article>


  <!-- Bloc 2 : Hedam -->
<article class="card">
  <h3>ğŸ› ï¸ Hedam</h3>
  <p class="muted">GÃ¨re ici la liste des sous-blocs de Hedam. Ces donnÃ©es sont utilisÃ©es dans l'onglet Saisie pour l'ajout de transactions liÃ©es Ã  Hedam.</p>

  <div style="margin:8px 0">
    <button id="cfg-hedam-add">â• Ajouter un sous-bloc Hedam</button>
    <button id="cfg-hedam-save">ğŸ’¾ Sauvegarder</button>
    <span id="cfg-hedam-msg" class="muted"></span>
  </div>

  <div class="table-wrap">
    <table id="cfg-hedam-table">
      <thead>
        <tr>
          <th>Code</th><th>Nom</th><th></th>
        </tr>
      </thead>
      <tbody><!-- rempli par JS --></tbody>
    </table>
  </div>
</article>


  <!-- ğŸ”œ Blocs Ã  venir : Locaux, ImpÃ´ts, etc. -->
  
  <!-- <article class="card"><h3>ğŸ¬ Locaux</h3> â€¦ </article> -->
</section>

    
  </main>

  <script>
    // <<< REMPLACE ICI PAR TON URL APPS SCRIPT >>>
    window.API_URL = "https://script.google.com/macros/s/AKfycbwkGArJ0SGjNDovC5JJ9z72ws34Y3FolM8We8SI-m4YmZ_NKQFhab9N4rYLaZiDrxrNwg/exec";
    
  </script>

  <script src="app.js?v=26"></script>

  <!-- Service Worker pour PWA -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
  <!-- Loader overlay -->
<div id="busy" hidden>
  <div class="box">
    <div class="spinner" aria-hidden="true"></div>
    <p id="busy-msg">Chargementâ€¦</p>
  </div>
  
</div>

  <!-- Toasts -->
<div id="toast" aria-live="polite" aria-atomic="true"></div>

</body>
</html>









































